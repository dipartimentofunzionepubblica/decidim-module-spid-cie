<%
  available_values = [:s, :m, :l, :xl]
  size = :m if local_assigns[:size].nil? || !available_values.include?(local_assigns[:size])
  url = local_assigns[:url].present? ? local_assigns[:url] : decidim.cie_login_path(sso: { idp: 'idp_key' })
  method = local_assigns[:method].present? ? local_assigns[:method] : :get
  origin = local_assigns[:origin].present? ? local_assigns[:origin] : ''
%>
<div class="text-center">
  <div class="cie-container">
    <% Decidim::Cie::Idp.all.each do |k, p| %>
      <div data-idp="<%= k %>" data-url="">
        <%= form_tag url, method: method do %>
          <%= image_pack_tag "media/images/entra_con_cie.svg", alt: "CIE ID Login", class: "cie-italia-it-button cie-italia-it-button-size-#{size} button-cie" %>
          <%= hidden_field_tag "sso[idp]", k %>
          <%= hidden_field_tag "sso[origin]", origin %>
          <%= submit_tag "Submit" %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
<%= javascript_pack_tag "decidim_cie" %>